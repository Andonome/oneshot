
% Check if 'adventures in fenestra' is present in directory aif.
% If it is, set up a toggle 'aif', and make it true.
% Repeat for 'core'.
\externalReferent{aif}
\externalReferent{core}

\newtoggle{hardcore}
\newtoggle{oneshot}

\ifStrSame{\jobname}{hardcore_horde_escape}%
  {\settoggle{hardcore}{true}}%
  {\ifStrSame{\jobname}{oneshot_horde_escape}%
    {\settoggle{oneshot}{true}}{}}

\ifStrSame{\jobname}{handouts_hardcore}%
  {\settoggle{hardcore}{true}}%
  {\ifStrSame{\jobname}{handouts_oneshot}%
    {\settoggle{oneshot}{true}}{}}

% When 'examplecharacter' = true, some stats show more information about how they work.
\iftoggle{oneshot}{
  \settoggle{examplecharacter}{true}{}
}

\newcounter{enemyNo}

\iftoggle{hardcore}{
  \setcounter{enemyNo}{8}
}{
  \setcounter{enemyNo}{4}
}

\newenvironment{baseNote}[1]{

  \begin{figure*}[b!]

  \setcounter{enc}{\value{list}}
  \subsection{#1}
  \setcounter{list}{\value{enc}}

  \begin{multicols}{2}
  \setlength\parindent{24pt}

}{

  \end{multicols}

  \end{figure*}

}


\newcommand{\newRule}[2]{

  \iftoggle{oneshot}{
    \begin{baseNote}{New Rule: #1}

    #2
    \end{baseNote}
  }{}

}


% Goblins should have torches.

\renewcommand{\goblin}[1][\npc{\T[\arabic{r3b}]\N}{\arabic{r3b} Goblins}]{
  \randomthreeB
	#1
	\randomtwo
	\randomtwoB
	\addtocounter{r2b}{-2}
	\addtocounter{enc}{1}
  \randomthree
  \randomthreeC
    \setcounter{gold}{\value{r3c}}
    \addtocounter{gold}{-2}
	\randomdozen
	\randomfourB
\person{\arabic{r2b}}% STRENGTH
{\arabic{r2}}% DEXTERITY 
{\arabic{enc}}% SPEED
{{\arabic{gold}}% INTELLIGENCE
{0}% WITS
{-4}}% CHARISMA
{0}% DR
{\arabic{r2}}% COMBAT
{\iftoggle{hardcore}{Projectiles~\arabic{r2},}{} Athletics~1, Deceit~1, Stealth~\arabic{r3}, \ifodd\value{r4}Tactics~\arabic{r2}\fi%
}% SKILLS
{\ifodd\value{r2}%
	Candle%
  \arabic{noAppearing}-lll
\else%
	\ifodd\value{r12}%
		\javelin, dagger%
	\else%
		\Dagger%
	\fi%
\fi%
\ifodd\value{r3b}%
	\ifnum\value{noAppearing}=1
		, tinder box%
	\fi%
\fi%
.}% EQUIPMENT
{}
}


\newcommand{\armouredOgre}[1][\npc{\M\N}{Armoured Ogre}]{
  #1
  \person{\iftoggle{oneshot}{5}{6}}% STRENGTH
  {0}% DEXTERITY 
  {4}% SPEED
  {{-3}% INTELLIGENCE
  {0}% WITS
  {-3}}% CHARISMA
  {0}% DR
  {1}% COMBAT
  {Crafts~1, Vigilance~2}% SKILLS
  {\greatsword, \partialleather}% EQUIPMENT
  {}
}


\newcommand{\prisoner}[1][\NPC{\Hu\F}{Random Villager}{Pessimistic}{Scratches nose}{Tribe}]{
	#1
	\randomthree
  \addtocounter{age}{-1}
	\randomthreeB
	\randomthreeC
    \setcounter{enc}{\value{r3c}}
    \addtocounter{enc}{-2}
	\randomtwo
	\randomtwoB
    \setcounter{list}{\value{r2b}}
    \addtocounter{r2b}{-1}
	\randomtwoC
  \randomdozen
\person{\arabic{age}}% STRENGTH
{0}% DEXTERITY 
{0}% SPEED
{{\arabic{enc}}% INTELLIGENCE
{-1}% WITS
{0}}% CHARISMA
{0}% DR
{\ifodd\value{r3b} 0\else 1\fi}% COMBAT
{\ifnum\value{r3}=1 Projectiles~1, \fi \ifnum\value{r3c}=3 Deceit\else Crafts\fi~\arabic{r2c}, \ifodd\value{r3}\else Vigilance~1, \fi Wyldcrafting~\arabic{r2}}% SKILLS
{Nothing}% EQUIPMENT
{}
}
